decluttering_templates:
  sports_playoffs:
    card:
      type: custom:flex-table-card
      title: '[[title]]'
      css:
        table+: 'padding: 0px; width: 100%;'
        tbody tr td:first-child: 'width: 100%; text-align: left; padding: 5px;'
        tbody tr:hover: 'background-color: black!important; color:white!important;'
      card_mod:
        style:
          .: |
            ha-card {
              overflow: auto;
              border: 2px solid [[color]];
              border-radius: 8px;
            }
          $: |
            .card-header {
              background-color: [[color]];
              color: white;
              padding: 8px!important;
              font-size: 14px!important;
              font-weight: bold!important;
            }
      sort_by: Date
      entities:
        include: '[[entity]]'
      columns:
        - name: ID
          data: '[[events]]'
          modify: x.competitions[0].id
          hidden: true
        - name: Date
          data: '[[events]]'
          modify: x.competitions[0].date
          hidden: true
        - name: Game Details
          data: '[[events]]'
          modify: |-
            (() => {
              if (!x || !x.competitions || !x.competitions[0]) {
                return "No data available";
              }
              const gameDate = `${new Date(x.date).toLocaleDateString("en-US", { weekday: "short" })} - ${new Date(x.competitions[0].date).toLocaleDateString("en-US", { month: "short", day: "numeric" })}`;
              const gameTime = new Date(x.competitions[0].date).toLocaleTimeString("en-US", {
                hour: "numeric",
                minute: "2-digit",
                hour12: true,
              });
              const today = new Date().toLocaleDateString("en-US", { year: "numeric", month: "2-digit", day: "2-digit" });
              const gameDateRaw = new Date(x.competitions[0].date).toLocaleDateString("en-US", { year: "numeric", month: "2-digit", day: "2-digit" });
              const dateStyle = gameDateRaw === today ? "background-color: green; color: white; padding: 2px 5px; border-radius: 4px;" : "";
              
              let bowlName = "";
              let bowlvenue = "";
              let bowlLocation = "";
              let bowlLogo = x.bowl_image || "";
              
              if (x.competitions && x.competitions[0]) {
                const comp = x.competitions[0];
                
                if (comp.notes && comp.notes[0]) {
                  bowlName = comp.notes[0].headline || "";
                  bowlName = bowlName
                    .replace("College Football Playoff ", "CFP ")
                    .replace(" at the ", " @ ")
                    .replace(" Presented by ", " ")
                    .replace(" Hosted by ", " ");
                }
                
                if (comp.venue && comp.venue.address) {
                  const city = comp.venue.address.city || "";
                  const state = comp.venue.address.state || "";
                  bowlLocation = [city, state].filter(Boolean).join(", ");
                }
                
                if (comp.venue && comp.venue.fullName) {                  
                  bowlvenue = comp.venue.fullName;
                }
              }
              
              const bowlHeader = bowlLogo || bowlName ? `
                <div style="text-align: center; margin: 10px 0;">
                  ${bowlLogo ? `<img src="${bowlLogo}" style="height: 70px; filter: drop-shadow(0 3px 6px rgba(0,0,0,0.6)); margin-bottom: 6px;">` : ""}
                  ${bowlName ? `<div style="font-weight: bold; font-size: 16px; color: #ff9800; text-shadow: 0 1px 3px black;">${bowlName}</div>` : ""}
                  ${bowlvenue ? `<div style="font-size: 13px; color: #ccc; margin-top: 4px;">${bowlvenue}</div>` : ""}
                  ${bowlLocation ? `<div style="font-size: 13px; color: #ccc; margin-top: 4px;">${bowlLocation}</div>` : ""}
                </div>` : "";
              
              
              const oddsSection = x.competitions[0].odds && x.competitions[0].odds[0]
                ? `<div style="background-color: blue; color: white; padding: 2px 5px; border-radius: 4px; font-size: 13px; margin-bottom: 6px;"> Odds: ${x.competitions[0].odds[0].details} | O/U: ${x.competitions[0].odds[0].overUnder} </div>`
                : "";
              const seriesSummary = [[show_series]] && x.competitions[0].series && x.competitions[0].series.summary
                ? `<div style="background-color: gray; color: white; padding: 2px 5px; border-radius: 4px; font-size: 13px; margin-bottom: 6px;"> Series: ${x.competitions[0].series.summary} </div>`
                : "";
                
              let statusRight;
              if (x.status.type.shortDetail === "Final") {
                statusRight = `<div style="background-color: white; color: black; padding: 2px 5px; border-radius: 4px; display: inline-block;">${x.status.type.shortDetail}</div>`;
              } else if (x.status.displayClock !== "0:00" && x.status.type.shortDetail !== "Scheduled") {
                statusRight = `<div style="background-color: red; color: white; padding: 2px 5px; border-radius: 4px; display: inline-block;">H${x.status.period} - ${x.status.displayClock}</div>`;
              } else {
                statusRight = `<span>H${x.status.period} - ${x.status.displayClock}</span>`;
              }
              

             const headerLine = `
               <div style="display: flex; justify-content: space-between; align-items: center; font-size: 14px; font-weight: bold; margin-bottom: 6px;">
                 <!-- LEFT: Date + Time -->
                 <div style="text-align: left; ${dateStyle}">
                   <div>${gameDate}</div>
                   <div style="font-size: 13px; color: #aaa; font-weight: normal;">${gameTime} ${x.competitions[0].broadcast || "NA"}</div>
                 </div>
                 
                 <!-- CENTER: Bowl Name (only shows if exists) -->
                 ${bowlName ? `
                   <div style="flex: 1; text-align: center; font-size: 15px; color: #ff9800; font-weight: bold; padding: 0 10px;">
                     ${bowlHeader}
                   </div>` : '<div style="flex: 1;"></div>'}
                   
                 <!-- RIGHT: Final / In-Progress status -->
                 <div style="text-align: right;">
                   ${statusRight}
                 </div>
               </div>`;
              
              const awayTeam = `<div><img src="${x.competitions[0].competitors[1].team.logo}" style="height: 16px;vertical-align:middle;"> ${x.competitions[0].competitors[1].team.displayName}${[[show_rankings]] ? " (" + x.competitions[0].competitors[1].curatedRank.current + ")" : ""}</div>`;
              const homeTeam = `<div><img src="${x.competitions[0].competitors[0].team.logo}" style="height: 16px;vertical-align:middle;"> ${x.competitions[0].competitors[0].team.displayName}${[[show_rankings]] ? " (" + x.competitions[0].competitors[0].curatedRank.current + ")" : ""}</div>`;
              const awayScore = `<div style="font-size:20px;color:${Number(x.competitions[0].competitors[1].score) > Number(x.competitions[0].competitors[0].score) ? 'green' : 'red'};">${x.competitions[0].competitors[1].score}</div>`;
              const homeScore = `<div style="font-size:20px;color:${Number(x.competitions[0].competitors[0].score) > Number(x.competitions[0].competitors[1].score) ? 'green' : 'red'};">${x.competitions[0].competitors[0].score}</div>`;
              
              return `<div style="display: flex; flex-direction: column; gap: 6px; padding: 8px;">
                ${oddsSection}
                ${seriesSummary}
                ${headerLine}
                <div style="display:flex;justify-content:space-between;">${awayTeam}${awayScore}</div>
                <div style="display:flex;justify-content:space-between;">${homeTeam}${homeScore}</div>
              </div>`;
            })()
  sports_playoffsv2:
    card:
      type: custom:flex-table-card
      title: '[[title]]'
      css:
        table+: 'padding: 0px; width: 100%;'
        tbody tr td:first-child: 'width: 100%; text-align: left; padding: 5px;'
        tbody tr:hover: 'background-color: black!important; color:white!important;'
      card_mod:
        style:
          .: |
            ha-card {
              overflow: auto;
              border: 2px solid [[color]];
              border-radius: 8px;
            }
          $: |
            .card-header {
              background-color: [[color]];
              color: white;
              padding: 8px!important;
              font-size: 14px!important;
              font-weight: bold!important;
            }
      sort_by: Date
      entities:
        include: '[[entity]]'
      columns:
        - name: ID
          data: '[[events]]'
          modify: x.competitions[0].id
          hidden: true
        - name: Date
          data: '[[events]]'
          modify: x.competitions[0].date
          hidden: true
        - name: Game Details
          data: '[[events]]'
          modify: |-
            (() => {
              if (!x || !x.competitions || !x.competitions[0]) return "No data";

              const gameDate = `${new Date(x.date).toLocaleDateString("en-US", { weekday: "short" })} - ${new Date(x.competitions[0].date).toLocaleDateString("en-US", { month: "short", day: "numeric" })}`;
              const gameTime = new Date(x.competitions[0].date).toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", hour12: true });

              // BOWL INFO
              let bowlName = "", bowlVenue = "", bowlLocation = "", bowlLogo = x.bowl_image || "";
              if (x.competitions[0].notes?.[0]) {
                bowlName = x.competitions[0].notes[0].headline || "";
                bowlName = bowlName
                  .replace("College Football Playoff ", "CFP ")
                  .replace(" at the ", " @ ")
                  .replace(" Presented by ", " ")
                  .replace(" Hosted by ", " ")
                  .replace("IS4S ", "");
              }
              if (x.competitions[0].venue) {
                bowlVenue = x.competitions[0].venue.fullName || "";
                const city = x.competitions[0].venue.address?.city || "";
                const state = x.competitions[0].venue.address?.state || "";
                bowlLocation = [city, state].filter(Boolean).join(", ");
              }

              // STATUS
              let statusRight = "";
              if (x.status.type.shortDetail === "Final") {
                statusRight = `<div style="background:#fff;color:#000;padding:3px 8px;border-radius:4px;font-weight:bold;">Final</div>`;
              } else if (x.status.displayClock !== "0:00" && x.status.type.shortDetail !== "Scheduled") {
                statusRight = `<div style="background:#c00;color:#fff;padding:3px 8px;border-radius:4px;font-weight:bold;">H${x.status.period} - ${x.status.displayClock}</div>`;
              } else {
                statusRight = `<span style="color:#888;">H${x.status.period} - ${x.status.displayClock}</span>`;
              }

              // TEAMS & SCORES
              const awayTeam = `<div><img src="${x.competitions[0].competitors[1].team.logo}" style="height:16px;vertical-align:middle;margin-right:4px;"> ${x.competitions[0].competitors[1].team.displayName}${[[show_rankings]] ? " (" + x.competitions[0].competitors[1].curatedRank.current + ")" : ""}</div>`;
              const homeTeam = `<div><img src="${x.competitions[0].competitors[0].team.logo}" style="height:16px;vertical-align:middle;margin-right:4px;"> ${x.competitions[0].competitors[0].team.displayName}${[[show_rankings]] ? " (" + x.competitions[0].competitors[0].curatedRank.current + ")" : ""}</div>`;
              const awayScore = `<div style="font-size:24px;color:${+x.competitions[0].competitors[1].score > +x.competitions[0].competitors[0].score ? '#0f0' : '#fff'};">${x.competitions[0].competitors[1].score}</div>`;
              const homeScore = `<div style="font-size:24px;color:${+x.competitions[0].competitors[0].score > +x.competitions[0].competitors[1].score ? '#0f0' : '#fff'};">${x.competitions[0].competitors[0].score}</div>`;

              return `
                <div style="padding:12px 8px;position:relative;">
                  <!-- BIG BACKGROUND LOGO (faded) -->
                  ${bowlLogo ? `
                    <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.12;pointer-events:none;z-index:0;">
                      <img src="${bowlLogo}" style="height:180px;width:auto;">
                    </div>` : ""}

                  <!-- TOP ROW: Date/Time | Status -->
                  <div style="display:flex;justify-content:space-between;align-items:center;font-size:14px;font-weight:bold;margin-bottom:8px;position:relative;z-index:1;">
                    <div style="color:#ccc;">
                      <div>${gameDate}</div>
                      <div style="font-size:13px;color:#888;">${gameTime} ${x.competitions[0].broadcast || "NA"}</div>
                    </div>
                    <div>${statusRight}</div>
                  </div>

                  <!-- BOWL HEADER (logo + name + venue + location) -->
                  ${bowlLogo || bowlName ? `
                    <div style="text-align:center;margin:12px 0;position:relative;z-index:1;">  
                      ${bowlLogo ? `<img src="${bowlLogo}" style="height:80px;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.7));margin-bottom:8px;">` : ""}
                      ${bowlName ? `<div style="font-weight:bold;font-size:17px;color:#ff9800;text-shadow:0 2px 4px rgba(0,0,0,0.8);">${bowlName}</div>` : ""}
                      ${bowlVenue ? `<div style="font-size:13px;color:#ccc;margin-top:4px;">${bowlVenue}</div>` : ""}
                      ${bowlLocation ? `<div style="font-size:12px;color:#999;">${bowlLocation}</div>` : ""}
                    </div>` : ""}

                  <!-- TEAMS & SCORES -->
                  <div style="display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1;">
                    <div>${awayTeam}</div>
                    <div>${awayScore}</div>
                  </div>
                  <div style="display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1;">
                    <div>${homeTeam}</div>
                    <div>${homeScore}</div>
                  </div>
                </div>`;
            })()
  sports_playoffsv5_withsquarterscores:
    card:
      type: custom:flex-table-card
      title: '[[title]]'
      css:
        table+: 'padding: 0px; width: 100%;'
        tbody tr td:first-child: 'width: 100%; text-align: left; padding: 0px; border: none;'
        tbody tr:hover: 'background-color: rgba(255,255,255,0.05)!important;'
        tbody tr: 'border-bottom: 1px solid rgba(255,255,255,0.08);'
      card_mod:
        style:
          .: |
            ha-card {
              overflow: hidden;
              border: 2px solid [[color]];
              border-radius: 12px;
              background: linear-gradient(135deg, [[color]] 0%, color-mix(in oklab, [[color]], black 20%) 100%);
            }
            /* Define the CSS animation keyframes */
            @keyframes scroll {
              0% { transform: translateX(0%); }
              100% { transform: translateX(-50%); }
            }
          $: |
            .card-header {
              background: transparent;
              color: white;
              padding: 12px 16px !important;
              font-size: 18px !important;
              font-weight: bold !important;
              text-shadow: 0 2px 4px rgba(0,0,0,0.4);
              border-bottom: 1px solid rgba(255,255,255,0.12);              
              }
            }
      sort_by: Date
      entities:
        include: '[[entity]]'
      columns:
        - name: ID
          data: '[[events]]'
          modify: x.competitions[0].id
          hidden: true
        - name: Date
          data: '[[events]]'
          modify: x.competitions[0].date
          hidden: true
        - name: Game Details
          data: '[[events]]'
          modify: |-
            (() => {
              if (!x || !x.competitions || !x.competitions[0]) return "No data";

              const gameDate = new Date(x.competitions[0].date).toLocaleDateString("en-US", { weekday: "short", month: "short", day: "numeric" });
              const gameTime = new Date(x.competitions[0].date).toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", hour12: true });

              // Bowl info
              let bowlName = "", bowlVenue = "", bowlLocation = "", bowlLogo = x.bowl_image || "";
              if (x.competitions[0].notes?.[0]) {
                bowlName = x.competitions[0].notes[0].headline || "";
                bowlName = bowlName
                  .replace("College Football Playoff ", "CFP ")
                  .replace(" at the ", " @ ")
                  .replace(" Presented by ", " ")
                  .replace(" Hosted by ", " ")
                  .replace("IS4S ", "");
              }
              if (x.competitions[0].venue) {
                bowlVenue = x.competitions[0].venue.fullName || "";
                const city = x.competitions[0].venue.address?.city || "";
                const state = x.competitions[0].venue.address?.state || "";
                bowlLocation = [city, state].filter(Boolean).join(", ");
              }

              // Teams
              const away = x.competitions[0].competitors[1];
              const home = x.competitions[0].competitors[0];
              const awayRecord = away.records?.[0]?.summary ? `(${away.records[0].summary})` : "";
              const homeRecord = home.records?.[0]?.summary ? `(${home.records[0].summary})` : "";
              const awayConference = away.team.conference ? `(${away.team.conference})` : "";
              const homeConference = home.team.conference ? `(${home.team.conference})` : "";
              
              // 1. Get the raw rank values
              const ar = away.curatedRank?.current;
              const hr = home.curatedRank?.current;
              
              // 2. Create the display string: only show if rank exists and is LESS than 99
              const aRstr = (ar && ar < 99) ? ` (${ar})` : "";
              const hRstr = (hr && hr < 99) ? ` (${hr})` : "";
              
              // 3. Combine with the name
              const awayName = away.team.displayName + ([[show_rankings]] ? aRstr : "");
              const homeName = home.team.displayName + ([[show_rankings]] ? hRstr : "");
              const awayScore = away.score || "0";
              const homeScore = home.score || "0";

              // game Odds
              const gameOdds = x.competitions[0].odds?.[0]?.details || "";
              const overUnder = x.competitions[0].odds?.[0]?.overUnder ? `O/U: ${x.competitions[0].odds[0].overUnder}` : "";

              // Ticker Toggle Logic
              const tickerEnabled = '[[show_ticker]]'; // This links to your variable/input_boolean
              const tickerIcon = tickerEnabled ? 'mdi:text-shimmer' : 'mdi:text-hide';
              const tickerColor = tickerEnabled ? '#FF9800' : 'rgba(255,255,255,0.3)';

              // Ensure the ticker only shows if enabled
              if (!tickerEnabled) recapTicker = "";
              
              // QUARTER SCORE GRID (compact) - NO FLOAT HERE
              let quarterGrid = "";
              
              // Determine if we should show a score grid (if game is started, final, OR scheduled)
              //const statusType = x.status.type.shortDetail;
              //const isScheduled = statusType === "Scheduled";
              //const showGrid = statusType !== "Scheduled" || ([[show_all_games]] && isScheduled); // Assuming a global setting or context controls showing scheduled games

              // 1. Get the state safely (default to 'pre' if data is missing)
              const gameState = x.status?.type?.state || "pre";
              
              // 2. Define if it is scheduled based ONLY on state
              const isScheduled = gameState === "pre";
              
              // 3. Logic to show the grid 
              // (Always true if you want the dummy grid to show for upcoming games)
              const showGrid = true; 
              
              if (showGrid) {
              // Start with dummy values
              let awayQ = ["0", "0", "0", "0"];
              let homeQ = ["0", "0", "0", "0"];
              
              // Only try to grab real scores if the game is NOT in 'pre' state
              if (gameState !== "pre" && away.linescores && away.linescores.length > 0) {
                for (let i = 0; i < 4; i++) {
                  if (away.linescores[i]) awayQ[i] = away.linescores[i].displayValue || "0";
                  if (home.linescores[i]) homeQ[i] = home.linescores[i].displayValue || "0";
                }
              }
              
              // The Score columns (F) should show 0 if game hasn't started
              const currentAwayScore = isScheduled ? "0" : awayScore;
              const currentHomeScore = isScheduled ? "0" : homeScore;
              
              quarterGrid = `
                <div style="width:100%; margin-bottom:4px;background:rgba(0,0,0,0.4);border-radius:8px;padding:8px;font-size:11px;">
                  <table style="width:100%;border-collapse:collapse;color:#ccc;">
                    <thead>
                       <tr style="text-align:center;color:#888;">
                         <th></th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th><th style="color:#ff9800;">F</th>
                       </tr>
                    </thead>
                    <tbody>
                     <tr style="text-align:center;">
                       <td style="text-align:left;padding-right:8px;">${away.team.abbreviation}</td>
                       <td>${awayQ[0]}</td><td>${awayQ[1]}</td><td>${awayQ[2]}</td><td>${awayQ[3]}</td>
                       <td style="font-weight:bold;color:#fff;">${currentAwayScore}</td>
                     </tr>
                     <tr style="text-align:center;">
                       <td style="text-align:left;padding-right:8px;">${home.team.abbreviation}</td>
                       <td>${homeQ[0]}</td><td>${homeQ[1]}</td><td>${homeQ[2]}</td><td>${homeQ[3]}</td>
                       <td style="font-weight:bold;color:#fff;">${currentHomeScore}</td>
                     </tr>
                    </tbody>
                  </table>
                </div>`;
              }
                 
                                       
              // RECAP TICKER (fixed scrolling + no card stretch)
              let recapTicker = "";
              if (x.competitions[0].headlines?.[0]?.description) {
                let recap = x.competitions[0].headlines[0].description
                  .replace(/\\u2014/g, "—")
                  .replace(/\\u/g, "");
                                   
                recapTicker = `
                  <div style="width:100%; margin-bottom:8px; overflow:hidden; background:rgba(0,0,0,0.3); border-radius:6px; padding:6px; position:relative; height:26px;">
                    <div style="position:absolute;left:0;top:0;white-space:nowrap;animation:scroll 15s linear infinite;color:#ff9800;font-size:13px;font-weight:500;">
                      ${recap}&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;${recap}
                    </div>
                  </div>`;
                
              }

              // LEFT COLUMN (Quarter Grid + Recap Ticker) 
              let leftColumn = (quarterGrid || recapTicker) ? `
                <div style="width:35%; float:left; margin:12px 0 0;">
                  ${quarterGrid}
                  ${recapTicker}
                </div>` : '';
              
              // Status
              let statusRight = "";

              
              // Where are we with the Game - Final, Upcoming or Live
              // 1. FINAL STATE
              if (x.status.type.state === "post" || x.status.type.shortDetail === "Final") {
                statusRight = `<div style="background:rgba(255,255,255,0.95);color:#000;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:bold;text-align:center;">Final</div>`;
                
              // 2. UPCOMING / PRE-GAME STATE
              } else if (x.status.type.state === "pre") {
                statusRight = `<div style="background:#2ecc71; color:#fff; padding:4px 12px; border-radius:20px; font-size:12px; font-weight:bold;text-align:center;">Upcoming</div>`;
                
              // 3. LIVE / IN-PROGRESS STATE
              } else if (x.status.type.state === "in") {
                statusRight = `
                  <div style="display:flex; flex-direction:column; align-items:center; gap:4px;">
                    <div style="background:#c00; color:#fff; padding:2px 10px; border-radius:12px; font-size:10px; font-weight:bold; text-transform:uppercase; letter-spacing:1px; animation: pulse 2s infinite;">
                      Live
                    </div>
                    <div style="color:#fff; font-size:13px; font-weight:bold;">
                      ${x.status.displayClock} <span style="color:rgba(255,255,255,0.6); font-size:11px;">${x.status.period}Q</span>
                    </div>
                  </div>`;
                  
              // 4. FALLBACK (Halftime or other)
              } else {
                statusRight = `<span style="color:rgba(255,255,255,0.6);font-size:12px;">${x.status.type.shortDetail}</span>`;
              }

              return `
              <div style="padding:16px;position:relative;background:rgba(0,0,0,0.25);min-height:160px;">
                ${bowlLogo ? `<div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.08;pointer-events:none;z-index:0;">
                  <img src="${bowlLogo}" style="height:140px;">
                </div>` : ""}
                
                <div style="position:relative;z-index:1;">
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                    <div style="color:rgba(255,255,255,0.85);font-size:13px;">
                      <div style="font-weight:600;">${gameDate}</div>
                      <div style="font-size:12px;color:rgba(255,255,255,0.6);">${gameTime} • ${x.competitions[0].broadcast || "TBA"}</div>
                      ${gameOdds ? `<div style="font-size:12px; color:#FFD700; font-weight:bold; margin-top:2px;">${gameOdds} - ${overUnder} </div>` : ""}                        
                    </div>
                    
                    <div style="display:flex; align-items:center; gap:10px;">
                      <ha-icon 
                        icon="${tickerIcon}" 
                        style="--mdc-icon-size:18px; cursor:pointer; color:${tickerColor};"
                        onclick="hass.callService('input_boolean', 'toggle', {entity_id: 'input_boolean.sports_ticker_toggle'})">
                      </ha-icon>
                      ${statusRight}
                    </div>
                  </div>
                  
                  ${bowlLogo || bowlName ? `
                    <div style="position:absolute; top:40px; left:0; right:0; margin:auto; width:120px; text-align:center; z-index:10; pointer-events:none;">
                      ${bowlLogo ? `<img src="${bowlLogo}" style="height:48px; margin-bottom:4px; filter:drop-shadow(0 1px 3px rgba(0,0,0,0.5));">` : ""}
                      ${bowlName ? `<div style="font-weight:bold;font-size:13px;color:#FFD700;text-shadow:0 1px 1px #000; line-height:1.2;">${bowlName}</div>` : ""}
                      ${bowlVenue ? `<div style="font-size:10px;color:rgba(255,255,255,0.75);margin-top:2px; line-height:1;">${bowlVenue}</div>` : ""}
                      ${bowlLocation ? `<div style="font-size:9px;color:rgba(255,255,255,0.55); line-height:1;">${bowlLocation}</div>` : ""}
                    </div>` : ""}
                    
                  ${leftColumn}
                  
                <div style="clear:both; border-bottom:1px solid rgba(255,255,255,0.15); margin-bottom:12px;"></div>
                
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                    <div style="flex:1;text-align:left;">
                      ${away.team.logo ? `<img src="${away.team.logo}" style="height:52px;width:52px;border-radius:50%;box-shadow:0 4px 12px rgba(0,0,0,0.5);">` : ""}
                    </div>
                    <div style="flex:1;text-align:right;">
                      ${home.team.logo ? `<img src="${home.team.logo}" style="height:52px;width:52px;border-radius:50%;box-shadow:0 4px 12px rgba(0,0,0,0.5);">` : ""}
                    </div>
                  </div>
                  
                  <div style="display:flex;justify-content:space-between;align-items:center;">
                  
                    <div style="flex:1; display:flex; flex-direction:column; text-align:left;">
                      <div style="font-weight:600; font-size:14px; color:#FFF; line-height:1.2;">${awayName}</div>
                      <div style="font-size:11px; color:rgba(255,255,255,0.6); margin-top:2px;">${awayRecord}</div>
                      <div style="font-size:11px; color:#FFD700; margin-top:2px;">${awayConference}</div>
                    </div>
                    
                    <div style="flex:1;text-align:center;">
                      <div style="display:inline-flex;align-items:center;gap:8px;">
                        <span style="font-size:36px;font-weight:bold;color:#FFF;">${awayScore}</span>
                        <span style="font-size:16px;color:rgba(255,255,255,0.5);">–</span>
                        <span style="font-size:36px;font-weight:bold;color:#FFF;">${homeScore}</span>                          
                      </div>
                    </div>
                    
                    <div style="flex:1; display:flex; flex-direction:column; text-align:right;">
                      <div style="font-weight:600; font-size:14px; color:#FFF; line-height:1.2;">${homeName}</div>
                      <div style="font-size:11px; color:rgba(255,255,255,0.6); margin-top:2px;">${homeRecord}</div>
                      <div style="font-size:11px; color:#FFD700; margin-top:2px;">${homeConference}</div>
                    </div>
                    
                  </div>
                </div>
              </div>`;
            })()
views:
  - title: Sandbox NCAAF Bowls (with NFL for testing)
    type: panel
    icon: mdi:strategy
    badges: []
    cards:
      - type: custom:mod-card
        card_mod:
          style:
            tabbed-card $: |
              mwc-tab {
                background: black;
                color: silver;
                border-color: var(--ha-card-border-color, var(--divider-color, #e0e0e0));
                border-width: 2px;
                border-style: solid;
                overflow: hidden;
                width: 20%;
              }
              mwc-tab[active] {
                background: white !important;
                color: black !important;
              }
        card:
          type: custom:tabbed-card
          styles:
            '--mdc-theme-primary': black
            '--mdc-tab-text-label-color-default': silver
            '--mdc-typography-button-font-size': 12px
          tabs:
            - attributes:
                label: NCAAF Bowls Dashboard
                icon: mdi:trophy
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    tabbed-card $: |
                      mwc-tab {
                        background: black;
                        border-color: silver;
                        border-width: 2px;
                        border-top-left-radius: 20px;
                        border-top-right-radius: 20px;
                        border-style: solid;
                        overflow: hidden;
                        width: 15%;
                      }
                      mwc-tab[active] {
                        background: white !important;
                        color: black !important
                      }
                card:
                  type: custom:tabbed-card
                  card_mod: null
                  style:
                    tabbed-card $: |
                      mwc-tab {
                        background: black;
                        border-color: silver;
                        border-width: 2px;
                        border-top-left-radius: 20px;
                        border-top-right-radius: 20px;
                        border-style: solid;
                        overflow: hidden;
                        width: 10%;
                      }
                      mwc-tab[active] {
                        background: white !important;
                        color: black !important
                      }
                  tabs:
                    - attributes:
                        label: College-Professional Sports
                        icon: mdi:trophy-variant-outline
                      card:
                        type: custom:mod-card
                        card_mod:
                          style:
                            tabbed-card $: |
                              mwc-tab {
                                background: black;
                                border-color: silver;
                                border-width: 2px;
                                border-top-left-radius: 20px;
                                border-top-right-radius: 20px;
                                border-style: solid;
                                overflow: hidden;
                                width: 5%;
                              }
                              mwc-tab[active] {
                                background: white !important;
                                color: black !important;
                              }
                        card:
                          type: custom:tabbed-card
                          styles:
                            '--mdc-theme-primary': black
                            '--mdc-tab-text-label-color-default': silver
                            '--mdc-typography-button-font-size': 12px
                          tabs:
                            - attributes:
                                label: NFL Playoffs to test decluttering changes
                                icon: mdi:trophy
                              card:
                                type: horizontal-stack
                                cards:
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: AFC Wildcard
                                          - color: '#D50A0A'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: afc_wild_card
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: AFC Divisional
                                          - color: '#D50A0A'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: afc_divisional
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: AFC Wildcard
                                          - color: '#D50A0A'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: afc_championship
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: Superbowl
                                          - color: '#DAA520'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: super_bowl
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: NFC Championship
                                          - color: '#013369'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: nfc_championship
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: NFC Divisional
                                          - color: '#013369'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: nfc_divisional
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:decluttering-card
                                        template: sports_playoffs
                                        variables:
                                          - title: NFC Wildcard
                                          - color: '#013369'
                                          - entity: sensor.nfl_playoff_filtered_events
                                          - events: nfc_wild_card
                                          - show_rankings: false
                                          - show_series: false
                                          - show_broadcast: true
                                          - type: horizontal-stack
                            - attributes:
                                label: NCAA Bowl Games to CFP
                                icon: mdi:trophy
                              card:
                                type: horizontal-stack
                                cards:
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:expander-card
                                        child-margin-top: 0.6em
                                        padding: 0
                                        title: CFP Playoff Bowl Games
                                        title-card-button-overlay: true
                                        title-card-clickable: true
                                        expanded: false
                                        cards:
                                          - type: custom:decluttering-card
                                            template: sports_playoffs
                                            variables:
                                              - title: All Bowl Games
                                              - color: '#003087'
                                              - entity: sensor.ncaaf_all_bowl_games
                                              - events: events
                                              - show_rankings: true
                                              - show_series: false
                                              - show_broadcast: true
                                  - type: vertical-stack
                                    cards:
                                      - type: custom:expander-card
                                        child-margin-top: 0.6em
                                        padding: 0
                                        title: NCAAF Regular Bowl Games
                                        title-card-button-overlay: true
                                        title-card-clickable: true
                                        expanded: false
                                        cards:
                                          - type: custom:decluttering-card
                                            template: sports_playoffs
                                            variables:
                                              - title: 2024-25 Bowl Games (Non-Playoff)
                                              - color: '#003087'
                                              - entity: sensor.ncaaf_regular_bowl_games
                                              - events: events
                                              - show_rankings: true
                                              - show_series: false
                                              - show_broadcast: true
                                      - type: custom:expander-card
                                        child-margin-top: 0.6em
                                        padding: 0
                                        title: CFP Playoff Bowl Games
                                        title-card-button-overlay: true
                                        title-card-clickable: true
                                        expanded: false
                                        cards:
                                          - type: custom:decluttering-card
                                            template: sports_playoffs
                                            variables:
                                              - title: CFP Playoff Bowl Games
                                              - color: '#FFD700'
                                              - entity: sensor.ncaaf_cfp_playoffs_bowl_games
                                              - events: events
                                              - show_rankings: true
                                              - show_series: false
                                      - type: custom:expander-card
                                        child-margin-top: 0.6em
                                        padding: 0
                                        title: CFP National Championship
                                        title-card-button-overlay: true
                                        title-card-clickable: true
                                        expanded: false
                                        cards:
                                          - type: custom:decluttering-card
                                            template: sports_playoffs
                                            variables:
                                              - title: CFP National Championship
                                              - color: '#FFD700'
                                              - entity: sensor.ncaaf_cfp_championship_bowl_game
                                              - events: events
                                              - show_rankings: true
                                              - show_series: false
